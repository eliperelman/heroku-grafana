/*! grafana - v4.0.0-1478693311beta1 - 2016-11-09
 * Copyright (c) 2016 Torkel Ã–degaard; Licensed Apache-2.0 */

System.register(["lodash","./variable"],function(a){var b,c,d;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(){function a(a,b,d,e){this.model=a,this.timeSrv=b,this.templateSrv=d,this.variableSrv=e,this.defaults={type:"custom",name:"",label:"",hide:0,options:[],current:{},query:"",includeAll:!1,multi:!1,allValue:null},c.assignModelProperties(this,a,this.defaults)}return a.$inject=["model","timeSrv","templateSrv","variableSrv"],a.prototype.setValue=function(a){return this.variableSrv.setOptionAsCurrent(this,a)},a.prototype.getModel=function(){return c.assignModelProperties(this.model,this,this.defaults),this.model},a.prototype.updateOptions=function(){return this.options=b["default"].map(this.query.split(/[,]+/),function(a){return{text:a.trim(),value:a.trim()}}),this.includeAll&&this.addAllOption(),this.variableSrv.validateVariableSelectionState(this)},a.prototype.addAllOption=function(){this.options.unshift({text:"All",value:"$__all"})},a.prototype.dependsOn=function(a){return!1},a.prototype.setValueFromUrl=function(a){return this.variableSrv.setOptionFromUrl(this,a)},a.prototype.getValueForUrl=function(){return"All"===this.current.text?"All":this.current.value},a}(),a("CustomVariable",d),c.variableTypes.custom={name:"Custom",ctor:d,description:"Define variable values manually",supportsMulti:!0}}}});